# Мониторы
set $LMonitor DP-2
set $CMonitor DP-3
set $RMonitor DP-1
set $TV HDMI-A-1

# Основные переменные
set $mainMod Mod4

# Основные приложения
bindsym --to-code $mainMod+Return exec alacritty, focus
bindsym --to-code $mainMod+c kill
bindsym --to-code $mainMod+Shift+m exec "swaymsg exit"
bindsym --to-code $mainMod+KP_Left exec "flatpak run org.gnome.NautilusDevel", focus
bindsym --to-code $mainMod+KP_Prior exec "steam -silent -nochatui -nofriendsui", focus
bindsym --to-code $mainMod+KP_Up exec "mpv --player-operation-mode=pseudo-gui --keep-open", focus
bindsym --to-code $mainMod+q exec firefox , focus
bindsym --to-code $mainMod+KP_Home exec Telegram, focus
bindsym --to-code $mainMod+space floating toggle
bindsym --to-code $mainMod+r exec "wofi --show drun"
bindsym --to-code $mainMod+f fullscreen toggle

# DPMS и перезагрузка
bindsym --to-code $mainMod+F12 exec "swaymsg 'output * dpms off'"
bindsym --to-code $mainMod+F11 exec "swaymsg 'output $LMonitor dpms toggle'; swaymsg 'output $CMonitor dpms toggle'; swaymsg 'output $RMonitor dpms toggle'"
bindsym --to-code $mainMod+Shift+r exec "swaymsg reload"

# Скриншоты (с использованием grim)
# bindsym --to-code $mainMod+Print exec "grim -g "$(slurp)" - | wl-copy"
bindsym --to-code Mod4+Shift+Print exec grim -g "$(slurp -o -r -c '#ff0000ff')" -t ppm - | satty --filename - --fullscreen --output-filename ~/Pictures/Screenshots/satty-$(date '+%Y%m%d-%H:%M:%S').png


# Перемещение фокуса
bindsym --to-code $mainMod+Left focus left
bindsym --to-code $mainMod+Right focus right
bindsym --to-code $mainMod+Up focus up
bindsym --to-code $mainMod+Down focus down

# Перемещение контейнеров между воркспейсами
bindsym --to-code $mainMod+Shift+Right exec swaymsg move window to workspace $(( $(swaymsg -t get_workspaces | jq -r '.[] | select(.focused==true) | .name') + 1 )) && swaymsg workspace next_on_output
bindsym --to-code $mainMod+Shift+Left exec swaymsg move window to workspace $(( $(swaymsg -t get_workspaces | jq -r '.[] | select(.focused==true) | .name') - 1 )) && swaymsg workspace prev_on_output


# Переключение воркспейсов
bindsym --to-code $mainMod+Tab workspace next_on_output

# Фокус на мониторы
bindsym --to-code $mainMod+1 focus output $LMonitor
bindsym --to-code $mainMod+2 focus output $RMonitor
bindsym --to-code $mainMod+3 focus output $CMonitor

# Перемещение контейнеров между воркспейсами и мониторами
bindsym --to-code $mainMod+Shift+1 [con_id=__focused__] move to output $LMonitor, focus
bindsym --to-code $mainMod+Shift+2 [con_id=__focused__] move to output $RMonitor, focus
bindsym --to-code $mainMod+Shift+3 [con_id=__focused__] move to output $CMonitor, focus

# Перемещение между мониторами
bindsym --to-code $mainMod+Ctrl+Shift+Left move container to output left
bindsym --to-code $mainMod+Ctrl+Shift+Right move container to output right

# Управление мышью
bindsym --to-code $mainMod+button2 move window
bindsym --to-code $mainMod+button3 resize window

#Жесты

bindgesture swipe:4:right [con_id=__focused__] move to output $CMonitor, focus
bindgesture swipe:4:left [con_id=__focused__] move to output $RMonitor, focus
bindgesture swipe:4:up [con_id=__focused__] move to output $LMonitor, focus


bindgesture hold:4 exec "wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+"
bindgesture hold:3 exec "wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-"

# Режим resize
mode "resize" {
    bindsym --to-code Left resize shrink width 10px
    bindsym --to-code Right resize grow width 10px
    bindsym --to-code Up resize shrink height 10px
    bindsym --to-code Down resize grow height 10px

    # Возврат в нормальный режим
    bindsym --to-code Return mode "default"
    bindsym --to-code Escape mode "default"
}
bindsym --to-code $mainMod+Shift+e mode "resize"

# Дополнительные настройки
floating_modifier $mainMod normal
focus_follows_mouse yes
